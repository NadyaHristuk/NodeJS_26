##Сжатия изображений с Imagemin

Почему следует беспокоиться?
Несжатые изображения могут существенно увеличить размер веб-страницы, но обычный пользователь почти не заметит разницы между несжатым и сжатым изображением.

С Lighthouse вы можете проверить доступные возможности для улучшения производительности страницы из-за сжатия изображений. Их можно найти в разделе «Эффективное кодирование изображений» (Efficiently encode images).

Примечание: Lighthouse сообщает о возможности сжатия изображений только в формате JPEG.

####Imagemin
Imagemin - отличный выбор для сжатия изображений. Он поддерживает много форматов изображений и с легкостью интегрируется со скриптами и инструментами сборки. Imagemin доступен как CLI , а также как npm-модуль . В большинстве случаев npm-модуль - лучшее решение, потому что он предлагает больше настроек, но CLI будет отличной альтернативой, если вы хотите попробовать Imagemin, не углубляясь в код.

Imagemin создан на основе плагинов. Плагин - npm-пакет, сжимает определенный формат изображения (например, mozjpeg сжимает jpeg). Популярные форматы изображений могут иметь несколько плагинов.

Самое важное при выборе плагина определить вид сжатия: с потерями или без. Сжатия без потерь не предусматривает каких-либо потерь данных. Зато сжатия с потерями уменьшает размер изображения за счет возможного ухудшения его качества. Если плагин не указывает вид сжатия, его можно определить API: когда можно указать качество изображения на выходе, то сжатие происходит с потерями.

Для большинства пользователей плагины, сжимают с потерями - лучший выбор. Они значительно уменьшают размер файла, а вы, при этом, можете настроить уровень сжатия в соответствии с вашими потребностями. Ниже представлены таблицу с популярными плагинами Imagemin. Это далеко не весь перечень, но указанные плагины пригодятся в вашем проекте.

формат изображения	Сжатия с потерями	Сжатие без потерь
JPEG	imagemin-mozjpeg	imagemin-jpegtran
PNG	imagemin-pngquant	imagemin-OptiPNG
GIF	imagemin-giflossy	imagemin-gifsicle
SVG	Imagemin-svgo	
WebP	imagemin-WebP	

Imagemin npm-модуль

const imagemin = require('imagemin');
const imageminJpegtran = require('imagemin-jpegtran');
const imageminPngquant = require('imagemin-pngquant');

(async () => {
	const files = await imagemin(['images/*.{jpg,png}'], {
		destination: 'build/images',
		plugins: [
			imageminJpegtran(),
			imageminPngquant({
				quality: [0.6, 0.8]
			})
		]
	});

	console.log(files);
	//=> [{data: <Buffer 89 50 4e …>, path: 'build/images/foo.jpg'}, …]
})();

Источник - https://web.dev/use-imagemin-to-compress-images/
```
